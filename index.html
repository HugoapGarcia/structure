<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button onclick="requestClick()">Connect Robot</button>
    <button onclick="loadScript()">Connect Robot-2</button>
</body>
<script>
    function requestClick() {
        // const URL = 'https://127.0.0.1:919/rw/mastership/request';
        // var xmlhttp = new XMLHttpRequest();
        // xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
        // xmlhttp.open("POST", URL, true);
        // xmlhttp.setRequestHeader("Content-Type", "application/json");
        // xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlenconded;v=2.0');
        // xmlhttp.setRequestHeader('Authorization', 'Basic ' + btoa('Default User:robotics')); //in prod, you should encrypt user name and password and provide encrypted keys here instead 
        // xmlhttp.withCredentials = true;
        // xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
        const headers = {
            "Accept": "application/json",
            "Content-Type": "text/plain",//"Content-Type": "application/x-www-form-urlenconded;v=2.0",
            "Authorization": "Basic " + btoa("Default User:robotics")
        }
        fetch('https://192.168.1.235:919/', {
            method: 'get',
            mode: 'cors',
            headers: new Headers({
                "Content-Type": 'application/json; charset=utf-8'
            }),
            body: JSON.stringify()
        }).then(function (response) {
            return response.json();
        }).then(function (data) {
            ChromeSamples.log('Created Gist:', data.html_url);
        });
    }

    function callbackFunction(xmlhttp) {
        console.log(xmlhttp.responseXML);
    }

    function loadScript() {
        const status = response => {
            if (response.status >= 200 && response.status < 300) {
                return Promise.resolve(response)
            }
            return Promise.reject(new Error(response.statusText))
        }

        const json = response => response.json()

        fetch('https://192.168.1.235:919/')
            .then(status)
            .then(json)
            .then(data => {
                console.log('Request succeeded with JSON response', data)
            })
            .catch(error => {
                console.log('Request failed', error)
            })
    }
</script>

</html>